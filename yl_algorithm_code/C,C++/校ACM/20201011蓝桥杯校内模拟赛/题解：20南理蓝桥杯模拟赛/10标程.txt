#include <cstdio>
#include <cstring>
using namespace std;
#define ll unsigned long long
int n, t;
ll pow[51];

int gcd(int a, int b) {
    return b==0?a:gcd(b, a%b);
}

void init() {
    pow[1] = t;
    for(int i=2 ; i<=n ; i++)
        pow[i] = pow[i-1]*t;
}

int main() {
    int K;
    scanf("%d",&K);
    while(K--) {
        scanf("%d%d", &n, &t);
        init();
        ll a=0, b=0;
        for(int i=1 ; i<=n ; i++) {
            a += pow[gcd(i, n)];
        }
        if(n&1)
            b+= pow[(n+1)/2]*n;
        else {
            b+=(n/2)*(pow[n/2]+pow[n/2+1]);
        }
        printf("%lld\n",(a+b)/2/n);
    }
}
