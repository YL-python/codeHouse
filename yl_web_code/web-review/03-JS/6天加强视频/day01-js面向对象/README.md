# 原来对象是这么用的

目标:

1. 体会面向对象的自治特征与复用特征
2. 学会封装简单的页面组件


基本技能:

1. JS 的基本语法
2. DOM 操作
3. 字符串处理 ( 正则 )

## 1. 为什么要面向对象

目标

- 我们之前学习的 OOP 是真的 C++ 这一类语言来发展出来的一套理论
- 自治（自己治理自己）
  - 做网站的时候( 一两个月可以完成吗? )
  - 一般工作时 是一个半成品的状态
    - 有 bug
    - 新需求( 在原有的基础上进行改良, 扩展 )
      - 可能存在 要完成这个任务, 需要把 以前的任务全部梳理一遍
      - 时间非常紧
    - 组件化
      - 所有的实施细节都不用你操心, 都是它自己完成 
      - <Comment />
      - <NewComment />
  - 思考问题的方式可以更加专注

## 2. 一般案例

- 前端开发
  - 页面( DOM )
  - 后台
  - 页面 + 后台 = 全栈（约等于）

- 页面中的元素就是对象 ( 停留 new Person() )
  - new Person
    - 要在页面中创建一个 图片 怎么做?
      - document.createElement()
      - Image 构造函数
    - 需要使用什么东西, 就创建一个什么构造函数
    - 要在页面上放一段文字( p, UIPView )
  - 组装一个 页面组件
  - 问题( 缺点 )
  - 更好
- 结合使用

## 3. 简单封装

- 简单元素
  - 原型继承
    - 给构造函数的 prototype 重新赋值
    - 那么该构造函数的实例 即可 使用该 prototype 所指向的对象的成员

      function Person () {}
      Person.prototype = Object.create( { name: '123' } )

- 复杂元素

  - 很麻烦的事实: 需要为页面中的每一元素( 内置 ), 创建对应的处理方法或 构造函数 
  - 原生 DOM 都是存在的, 只是调用方法繁琐了一点

- 引入模板
  - 怎么办???
  - 回到根本上: 我们要做什么???
    - 在页面中显示 HTML 
    - 可以考虑将变化的东西抽取出来
    - 将不变的东西已字符串的形式呈现

- 正则表达式的替换( 概要 )
  - 需要取出 {{ xxx }} 形式的字符串
  - 取出 xxx 在 data 中找到对应的同名属性值
  - 将 {{ xxx }} 替换成属性值

      /\{\{\s*(.+?)\s*\}\}/g
  
  - 使用 replace 方法
    字符串.replace( 全局模式的正则表达式, function( 匹配到的数据, 分组1, 分组2, ... ) {
      // ...
      return 需要替换的内容
    } );

    '123'.replace( /\d/g, n => `[${n}]` ); // => '[1][2][3]'
  
  

> 微信 Schrodingers-cat
