<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>疫情数据可视化</title>
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <div class="main">
    <header>
      <h3>新型冠状病毒肺炎</h3>
      <h1>疫情实时大数据报告</h1>
    </header>
    <div class="content">
      <div class="tab">
        <a class="active" href="javascript:;">国内疫情</a>
        <a href="javascript:;">国内疫情</a>
        <a href="javascript:;">国内疫情</a>
      </div>
    </div>

    <div class="chart">
    </div>

    <script src="./js/flexible.js"></script>
    <script src="../../echarts.min.js"></script>
    <script src="../../china.js"></script>
    <script>
      //初始化echarts实例
      var myChart = echarts.init(document.querySelector('.chart'));
      // 指定图表的配置项和数据
      option = {
        tooltip: {
          trigger: 'item',
          triggerOn: 'click',
          enterable:true,
          formatter: (e) => {
            console.log(e);
            return "地区：" + e.name + "<br />" + "确诊：" + e.value + '<div class="tooltipLink" href="www.baidu.com">查看详情</div>'
          }
        },
        visualMap: {
          type: 'piecewise',
          itemWidth: 10,
          itemHeight: 10,
          itemGap: 3,
          textGap: 5,
          left: "10%",
          bottom: "10%",
          textStyle: {
            color: "#333",
            fontSize: 8
          },
          pieces: [{
            gte: 10000,
            label: ">=10000",
            color: "#B80909"
          }, {
            gte: 1000,
            lt: 10000,
            label: "1000-9999",
            color: "#E64546"
          }, {
            gte: 100,
            lt: 1000,
            label: "100-999",
            color: "#F57567"
          }, {
            gte: 10,
            lt: 100,
            label: "10-99",
            color: "#FF9985"
          }, {
            gte: 1,
            lt: 10,
            label: "1-9",
            color: "#FFE5DB"
          }, {
            value: 0,
            color: "#ffffff",
            label: "0"
          }]
        },
        series: [{
          type: 'map',
          mapType: 'china',
          roam: false,
          zoom: 1.2,
          label: {
            show: true,
            color: 'rgb(0, 0, 0)',
            fontSize: 10,
          },
          itemStyle: {
            emphasis: {
              areaColor: "rgb(199,255,253)"
            }
          },
          data: [{
            name: '北京',
            value: 0
          }, {
            name: '天津',
            value: 9
          }, {
            name: '上海',
            value: 10
          }, {
            name: '重庆',
            value: 999
          }, {
            name: '河北',
            value: 126
          }, {
            name: '河南',
            value: 675
          }, {
            name: '云南',
            value: 117
          }, {
            name: '辽宁',
            value: 74
          }, {
            name: '黑龙江',
            value: 0
          }, {
            name: '湖南',
            value: 593
          }, {
            name: '安徽',
            value: 480
          }, {
            name: '山东',
            value: 270
          }, {
            name: '新疆',
            value: 29
          }, {
            name: '江苏',
            value: 308
          }, {
            name: '浙江',
            value: 829
          }, {
            name: '江西',
            value: 476
          }, {
            name: '湖北',
            value: 13522
          }, {
            name: '广西',
            value: 139
          }, {
            name: '甘肃',
            value: 55
          }, {
            name: '山西',
            value: 74
          }, {
            name: '内蒙古',
            value: 34
          }, {
            name: '陕西',
            value: 142
          }, {
            name: '吉林',
            value: 42
          }, {
            name: '福建',
            value: 179
          }, {
            name: '贵州',
            value: 56
          }, {
            name: '广东',
            value: 797
          }, {
            name: '青海',
            value: 15
          }, {
            name: '西藏',
            value: 1
          }, {
            name: '四川',
            value: 282
          }, {
            name: '宁夏',
            value: 34
          }, {
            name: '海南',
            value: 79
          }, {
            name: '台湾',
            value: 10
          }, {
            name: '香港',
            value: 15
          }, {
            name: '澳门',
            value: 9
          }]
        }]
      };
      //使用指定的配置项和数据显示图表
      myChart.setOption(option);
	  console.log("配置完毕",myChart);
	  window.addEventListener("resize", () => {
        if (myChart) {
          console.log("执行了",myChart);
          myChart.resize();
        }
      });
    </script>
  </div>
</body>

</html>